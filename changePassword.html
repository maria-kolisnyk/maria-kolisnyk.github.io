<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>


    <link rel="stylesheet" href="https://idm-trovrent-us-dev.macronlabs.com/dist/css/vendor_bundle.css">
    <link rel="stylesheet" href="https://idm-trovrent-us-dev.macronlabs.com/dist/css/trov.app.css">

    <link id="customStyle" rel="stylesheet" href="https://trov-develop-renters-gb.s3.us-west-1.amazonaws.com/templates/identityserver/halifax.app.css">
    <script src="https://idm-trovrent-us-dev.macronlabs.com/dist/js/vendors_bundle.js"></script>
    <link type="image/x-icon" rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAjtJREFUOBFjZIjb8Z+BCoCJCmaAjRh8BrGA3FUfoMxQ5auE4svvv/4yePScZThx9yNYvMhdnqE9TA1FzY/f/xhCJl9g2H31LQMzg35Mw8Eb7xm42JgZHDSFGJiZGMGYg5WZIchYjGHLhdcMPgZiDNPiteByIDV//v5nCJtygWHnlbdgw+FhVLXmNkPbpnsoNgrxsDHsLDUBG/D3HyJyfwJdEjTpPMO2S2/g6hlB0a8sxsnw5vNvBjYWRgZtaR4GRqA0CzMjw9effxk4gS798uMPg4wQB8P3X//A4jeff2VgZGRkePLuB4MAFwvDk/c/GcBh1An0++wDTxjkhDkZzJT4GT4DNb789Ith37W3DMZSPAwS/GwM4vzsDEuOPWOYFKPJ0LLpLoOligCDijgXQ9Xq22CDwF4DuaLUSxHsBR0ZHgYLoCJ0ANKkKMrJ8OLjT4ZgEwmGzedfMyiKcDFcffoFrBTstY5QVYaN514xWKkKgA0DBfw3oLdMgK47fucDOGCvADUoinCCvWurLggWO/PgIzhIdlx+AwwOpCwC8kJDgAo4HJBdtOjIUwZ/Y3EGfk5wSIBdVb/uDgMw4uAAIgPkggzZX2HKoAEME2SwEGhIANCQQg8FZGEGVXFuhugZlxj+QGMTbBAuQ7ZceMWQMvcq2JJgU3FwZMBMCzOXADNhhoG9lu4ow6AhyQ1TA6ZBUd288S7Dd2CaAQE1YGBnOsuC2cjEJmCg77/+DjWMkBWQyoanbFI1oqunmkEAo7vF4+Woo1YAAAAASUVORK5CYII=">
</head>
<body>
<div class="row container body-content col-12">
    <div class="Header">
        <div class="Logo">
            <div class="trovBlue" alt="Logo"></div>
        </div>
    </div>


    <div class="account-page col-12">
        <div class="main-block">
            <div class="form-header">
                Change Password
            </div>
            <div style="width:100%">
                <div class="set-password-form">
                    <form id="setPasswordForm" class="form" action="" method="post" novalidate="novalidate">
                        <input type="hidden" id="Token" name="Token" value="CfDJ8PcyYrdO8jBMiVN5ty/dxqt25uHbz3T0PYQPAa7PtP5HoVh7G8/+NzfAe24SDOi5O2/8MEbdh2zGjWVVddmLnQ69aag3209yR55HgN9Pvemf7is2PIcvZxaYwzsHlNS3z2yuVYLvdOL1XFBXjPv0LVB/B0d74ulB9vnyAN6c/Ey4PM9uA3Lx7UyXEq1Nz4Ufj/GOZ/kLv446DpCXawLjY6bvcjFZA83uHXAu4/GITqtQ7QWJDmCxT/hcThXHLWcsWfoGZ2pet4AXULvW1NM/h9g=">
                        <input type="hidden" id="TenantConfiguration_Discriminator" name="TenantConfiguration.Discriminator" value="Halifax">
                        <input type="hidden" id="TenantConfiguration_CustomStyleSheetUrl" name="TenantConfiguration.CustomStyleSheetUrl" value="https://trov-develop-renters-gb.s3.us-west-1.amazonaws.com/templates/identityserver/halifax.app.css">
                        <input type="hidden" id="TenantConfiguration_CustomJavascriptFileUrl" name="TenantConfiguration.CustomJavascriptFileUrl" value="https://trov-develop-renters-gb.s3.us-west-1.amazonaws.com/templates/identityserver/halifax.app.js">
                        <input type="hidden" data-val="true" data-val-required="The AllowSetPassword field is required." id="AllowSetPassword" name="AllowSetPassword" value="True">
                        <div class="form-group">
                            <input id="txtNewPassword" class="inputbox password " type="password" placeholder="Enter new password" autofocus="" value="" data-val="true" data-val-required="The Password is required." name="Password">
                            <div class="password-eye toggle-password" title="Mask/Unmask password to check content"></div>
                        </div>
                        <div class="row">
                            <div id="passwordPolicyMessage" class="password-policy "><p>Your password must contain at least <strong id="length">8 characters</strong> containing <strong id="uppercase">uppercase</strong>, <strong id="lowercase">lowercase</strong>, <strong id="number">a number</strong>, and <strong id="special_character">a special character</strong>.</p></div>
                            <input type="hidden" id="PasswordPolicyDescription" name="PasswordPolicyDescription" value="">
                        </div>
                        <div class="row">
                            <input type="submit" value="default" class="hidden" tabindex="-1">
                            <button type="submit" id="btnSetPassword" class="set-password-button btn-primary btn-default" title="Save">
                                Save
                            </button>
                        </div>
                        <input name="__RequestVerificationToken" type="hidden" value="CfDJ8PcyYrdO8jBMiVN5ty_dxquTjk4ZUuoSO8ca3NdEBpanEw4QGWHpAPVYM5YpwRSsqKdoPrR3f62g9Yr0rWcQv1t9kuF48OaW1_qiPh9XYR0woa0DlthmmUFdN74-HRAtYz1j_vpsNpd-AOlLGRBOkgo"></form>

                </div>
            </div>
        </div>
    </div>


</div>

<script src="https://idm-trovrent-us-dev.macronlabs.com/dist/js/bundle.js"></script>

<script>
    var passwordPolicy = {"Message":"<p>Your password must contain at least <strong id='length'>8 characters</strong> containing <strong id='uppercase'>uppercase</strong>, <strong id='lowercase'>lowercase</strong>, <strong id='number'>a number</strong>, and <strong id='special_character'>a special character</strong>.</p>","Tokens":[]};
    var timer;
    $(document).ready(function() {
        $(".toggle-password").click(function() {
            togglePassword("txtNewPassword");
        });

        var passwordInput = $("#txtNewPassword");
        passwordInput.keypress(function(event) {
            timer = setTimeout(function () {
                    passwordInput.change();
                },
                50);
        });

        passwordInput.keydown(function(event) {
            if (event.which === 8 || event.which === 46) { //backspace and delete
                timer = setTimeout(function() {
                        passwordInput.change();
                    },
                    50);
            }
        });

        passwordInput.change(function (event) {
            displayPolicyMessage();
        });

        function displayPolicyMessage() {
            if (passwordPolicy == null)
                return;

            var value = passwordInput.val();
            var message = passwordPolicy.Message;
            passwordPolicy.Tokens.forEach(element => {
                switch (element.Name) {
                    case "Alpha":
                        var alphaRegex = new RegExp('[a-zA-Z]+');
                        var text = wrapWithBold(element.Text);
                        if (alphaRegex.test(value)) {
                            text = wrapWithStrike(text);
                        }
                        message = message.replace("[" + element.Name + "]", text);
                        break;
                    case "Numeric":
                        var alphaRegex = new RegExp('[0-9]+');
                        var text = wrapWithBold(element.Text);
                        if (alphaRegex.test(value)) {
                            text = wrapWithStrike(text);
                        }
                        message = message.replace("[" + element.Name + "]", text);
                        break;
                    case "Special":
                        var alphaRegex = new RegExp('[\\[\\]!"#$%&()*+,-./:;<=>?^_`{|}~£@\' ]+');
                        var text = wrapWithBold(element.Text);
                        if (alphaRegex.test(value)) {
                            text = wrapWithStrike(text);
                        }
                        message = message.replace("[" + element.Name + "]", text);
                        break;
                    case "Uppercase":
                        var alphaRegex = new RegExp('[A-Z]+');
                        var text = wrapWithBold(element.Text);
                        if (alphaRegex.test(value)) {
                            text = wrapWithStrike(text);
                        }
                        message = message.replace("[" + element.Name + "]", text);
                        break;
                    case "Lowercase":
                        var alphaRegex = new RegExp('[a-z]+');
                        var text = wrapWithBold(element.Text);
                        if (alphaRegex.test(value)) {
                            text = wrapWithStrike(text);
                        }
                        message = message.replace("[" + element.Name + "]", text);
                        break;
                    case "MinLength":
                        var text = wrapWithBold(element.Text);
                        console.log("value.length: ", value.length, "MinLength: ", element.Length);
                        if (value.length >= element.Length) {
                            console.log("MinLength achieved");
                            text = wrapWithStrike(text);
                        }
                        message = message.replace("[" + element.Name + "]", text);
                        break;
                    case "MaxLength":
                        var text = wrapWithBold(element.Text);
                        if (value.length < element.Length) {
                            text = wrapWithStrike(text);
                        }
                        message = message.replace("[" + element.Name + "]", text);
                        break;
                }
            });

            $("#passwordPolicyMessage").html(message);
        }

        function wrapWithBold(text) {
            console.log(text)
            return "<b>" + text + "</b>";
        }

        function wrapWithStrike(text) {
            console.log(text, 'wrapWithStrike')
            return "<s>" + text + "</s>";
        }

        displayPolicyMessage();
    });
</script>

<script src="scripts/halifax.app.js"></script>
<div class="copyright-text">
    <p>
        © 2020 Trov, Inc. All Rights Reserved.
    </p>
    <p style="color: transparent">
        2.5.1.0        </p>
</div>
<div class="footer-bar"><div class="footer-container">
    <ul>
        <li>
            <a href="https://www.halifax.co.uk/insurance/home-insurance/app/short-privacy-policy/" target="_blank">Privacy Policy</a>
        </li>
        <li>
            <a href="https://www.halifax.co.uk/insurance/home-insurance/app/terms-conditions/" target="_blank">Terms and Conditions</a>
        </li>
        <li>
            <a href="https://www.halifax.co.uk/accessibility/" target="_blank">Accessibility</a>
        </li>
        <li>
            <a href="https://www.halifax.co.uk/securityandprivacy/cookies/" target="_blank">Cookie Policy</a>
        </li>
    </ul>        <div class="footer-logo">            <p>Powered by</p>            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="20" viewBox="0 0 80 33">
    <g fill="#FFF" fill-rule="evenodd">
        <path d="M54.64 7.69c-.173-.42.063-.875.524-.875h4.385c.462 0 .97.459 1.129.886l6.105 16.427c.079.21.38.238.46.028l6.148-16.47c.16-.426.669-.87 1.13-.87h4.246c.461 0 .698.454.524.875l-9.446 23.29c-.172.422-.692 1.058-1.153 1.058h-3.406c-.461 0-.981-.636-1.155-1.057L54.641 7.69zM43.943 26.42c-4.093 0-7.41-3.265-7.41-7.293 0-4.028 3.317-7.293 7.41-7.293 4.092 0 7.41 3.265 7.41 7.293 0 4.028-3.318 7.293-7.41 7.293m-.021-19.488c-6.843 0-12.39 5.46-12.39 12.195s5.547 12.194 12.39 12.194c6.843 0 12.39-5.46 12.39-12.194 0-6.735-5.547-12.195-12.39-12.195M53.227 2.397a.543.543 0 0 1-.546.538H35.046a.542.542 0 0 1-.547-.538V.562c0-.297.245-.538.547-.538H52.68c.302 0 .546.241.546.538v1.835zM31.542 7.115c0-.329-.45-.59-.785-.584-3.738.07-6.05 1.568-7.735 4.344-.128.21-.351.124-.351-.12V7.619c0-.323-.65-.804-.977-.804H5.914V.902c0-.323-.05-.878-.377-.878h-4.45C.757.024 0 .58 0 .902v23.619c0 5.325 3.49 7.518 7.641 7.518h2.94c.328 0 .262-.734.262-1.057v-3.796c0-.323.066-.968-.262-.968H9.227c-1.913 0-3.313-.412-3.313-2.57V12.292c0-.323.482-.626.81-.626h9.332c.328 0 .7.303.7.626v18.69c0 .323.16 1.057.487 1.057h4.45c.329 0 .978-.734.978-1.057v-8.986c0-6.183 3.647-9.45 8.326-9.69a.573.573 0 0 0 .545-.582v-4.61z"></path>
    </g>
</svg>
</div>
</div></div>


</body>
</html>